(this["webpackJsonpbloglist-frontend"]=this["webpackJsonpbloglist-frontend"]||[]).push([[0],{16:function(e,t,n){e.exports=n(40)},39:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(15),l=n.n(o),c=n(1),u=n.n(c),i=n(3),s=n(2),p=n(5),f=n.n(p),d=null,m={getAll:function(){return f.a.get("/api/blogs").then((function(e){return e.data}))},create:function(){var e=Object(i.a)(u.a.mark((function e(t){var n,a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:d}},e.next=3,f.a.post("/api/blogs",t,n);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),update:function(e,t){return console.log("id on ",e),f.a.put("".concat("/api/blogs","/").concat(e),t).then((function(e){return e.data}))},setToken:function(e){d="bearer ".concat(e)},deleteObject:function(e){var t={headers:{Authorization:d}};return f.a.delete("".concat("/api/blogs","/").concat(e),t).then((function(e){return e.data}))}},g=function(e){var t=e.LoggingIn,n=Object(a.useState)(""),o=Object(s.a)(n,2),l=o[0],c=o[1],p=Object(a.useState)(""),f=Object(s.a)(p,2),d=f[0],m=f[1],g=function(){var e=Object(i.a)(u.a.mark((function e(n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault(),t({username:l,password:d}),c(""),m("");case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement("form",{onSubmit:g},r.a.createElement("div",null,"username",r.a.createElement("input",{id:"username",type:"text",value:l,name:"Username",onChange:function(e){return c(e.target.value)}})),r.a.createElement("div",null,"password",r.a.createElement("input",{id:"password",type:"password",value:d,name:"Password",onChange:function(e){return m(e.target.value)}})),r.a.createElement("button",{id:"login-button",type:"submit"},"login")))},b={login:function(){var e=Object(i.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("credentials are",t),e.next=3,f.a.post("/api/login",t);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},v=function(e){var t=e.message;return null===t?null:(console.log("message o",t),r.a.createElement("div",{className:t.type},t.message))},h=function(e){var t=e.blog,n=e.deleteBlog,o=e.addLikes,l=Object(a.useState)(!1),c=Object(s.a)(l,2),u=c[0],i=c[1],p={display:u?"none":""},f={display:u?"":"none"},d=function(){i(!u)};return r.a.createElement("div",null,r.a.createElement("div",{className:"blog",style:p},t.title," ",t.author,r.a.createElement("button",{onClick:d},"view")),r.a.createElement("div",{className:"blog2",style:f},"Title: ",t.title," ",r.a.createElement("button",{onClick:d},"hide")," ",r.a.createElement("br",null),"url: ",t.url," ",r.a.createElement("br",null),"likes: ",t.likes,r.a.createElement("button",{onClick:function(){var e={likes:t.likes+1,title:t.title,author:t.author,url:t.url};o(t.id,e)}},"like"),r.a.createElement("br",null),"Author: ",t.author," ",r.a.createElement("br",null),r.a.createElement("button",{onClick:function(){n(t.id)}},"remove")))},E=function(e){var t=e.blogs,n=e.deleteBlog,a=e.handleLike,o=t.sort((function(e,t){return t.likes-e.likes}));return r.a.createElement("div",{id:"blogList"},r.a.createElement("h2",null,"Blogs"),o.map((function(e){return r.a.createElement(h,{key:e.id,blog:e,deleteBlog:n,addLikes:a})})))},k=function(e){var t=e.createBlog,n=Object(a.useState)(""),o=Object(s.a)(n,2),l=o[0],c=o[1],p=Object(a.useState)(""),f=Object(s.a)(p,2),d=f[0],m=f[1],g=Object(a.useState)(""),b=Object(s.a)(g,2),v=b[0],h=b[1],E=function(){var e=Object(i.a)(u.a.mark((function e(n){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.preventDefault(),t({title:l.trim(),author:d.trim(),url:v.trim()}),c(""),m(""),h("");case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("form",{onSubmit:E},r.a.createElement("div",null,"title:",r.a.createElement("input",{id:"title",type:"text",value:l,onChange:function(e){return c(e.target.value)}})),r.a.createElement("div",null,"author:",r.a.createElement("input",{id:"author",type:"text",value:d,onChange:function(e){return m(e.target.value)}})),r.a.createElement("div",null,"url:",r.a.createElement("input",{id:"url",type:"text",value:v,onChange:function(e){return h(e.target.value)}})),r.a.createElement("button",{type:"submit"},"save"))},w=r.a.forwardRef((function(e,t){w.displayName="Togglable";var n=Object(a.useState)(!1),o=Object(s.a)(n,2),l=o[0],c=o[1],u={display:l?"none":""},i={display:l?"":"none"},p=function(){c(!l)};return Object(a.useImperativeHandle)(t,(function(){return{toggleVisibility:p}})),r.a.createElement("div",null,r.a.createElement("div",{style:u},r.a.createElement("button",{onClick:p},e.buttonLabel)),r.a.createElement("div",{style:i,className:"togglableContent"},e.children,r.a.createElement("button",{onClick:p},"cancel")))})),O=w,j=function(){var e=Object(a.useState)([]),t=Object(s.a)(e,2),n=t[0],o=t[1],l=Object(a.useState)(null),c=Object(s.a)(l,2),p=c[0],f=c[1],d=Object(a.useState)(null),h=Object(s.a)(d,2),w=h[0],j=h[1],y=r.a.createRef();Object(a.useEffect)((function(){m.getAll().then((function(e){return o(e)}))}),[]),Object(a.useEffect)((function(){var e=window.localStorage.getItem("loggedBlogAppUser");if(e){var t=JSON.parse(e);f(t),m.setToken(t.token)}}),[]);var x=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"notification";j({message:e,type:t}),setTimeout((function(){j(null)}),5e3)},S=function(){var e=Object(i.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:window.localStorage.clear();case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),B=function(){var e=Object(i.a)(u.a.mark((function e(t){var n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,b.login(t);case 3:n=e.sent,window.localStorage.setItem("loggedBlogAppUser",JSON.stringify(n)),m.setToken(n.token),f(n),x("You have logged in as ".concat(n.name)),e.next=14;break;case 10:e.prev=10,e.t0=e.catch(0),x("wrong credentials","error"),setTimeout((function(){j(null)}),5e3);case 14:case"end":return e.stop()}}),e,null,[[0,10]])})));return function(t){return e.apply(this,arguments)}}(),C=function(){var e=Object(i.a)(u.a.mark((function e(t){var a;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y.current.toggleVisibility(),e.prev=1,e.next=4,m.create(t);case 4:a=e.sent,o(n.concat(a)),x("New Blog: ".concat(t.title," by ").concat(t.author," has been added")),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),x(e.t0.response.data.error,"error"),setTimeout((function(){j(null)}),5e3);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}(),L=function(){var e=Object(i.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("eventti o",t),e.prev=1,e.next=4,m.deleteObject(t);case 4:o(n.filter((function(e){return e.id!==t}))),x("Blog has been removed"),e.next=12;break;case 8:e.prev=8,e.t0=e.catch(1),x(e.t0.response.data.error,"error"),setTimeout((function(){j(null)}),5e3);case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}(),T=function(){var e=Object(i.a)(u.a.mark((function e(t,a){var r;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("blogi o",a),console.log("Blogin id on",t),e.prev=2,e.next=5,m.update(t,a);case 5:r=e.sent,console.log("updated blog o",r),o(n.map((function(e){return e.id!==r.id?e:r}))),x("You liked the blog '".concat(a.title,"'")),e.next=16;break;case 11:e.prev=11,e.t0=e.catch(2),console.log("error o",e.t0.response.data.error),x(e.t0.response.data.error,"error"),setTimeout((function(){j(null)}),5e3);case 16:case"end":return e.stop()}}),e,null,[[2,11]])})));return function(t,n){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement("h2",null,"BlogApp"),r.a.createElement(v,{message:w}),null===p?r.a.createElement(O,{buttonLabel:"login"},r.a.createElement(g,{LoggingIn:B})):r.a.createElement("div",null,r.a.createElement("p",null,p.name," logged in",r.a.createElement("button",{onClick:S},"logout")),r.a.createElement(O,{buttonLabel:"new blog",ref:y},r.a.createElement("h3",null,"Create new blog"),r.a.createElement(k,{createBlog:C})),r.a.createElement(E,{blogs:n,deleteBlog:L,handleLike:T})))};n(39);l.a.render(r.a.createElement(j,null),document.getElementById("root"))}},[[16,1,2]]]);
//# sourceMappingURL=main.df15b531.chunk.js.map